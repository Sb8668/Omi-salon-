<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ओमी सलून | प्रीमियम ग्रूमिंग</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Marathi:wght@300;400;700;900&display=swap');
body{font-family:'Noto Sans Marathi', sans-serif;background-color:#000;color:#fff;margin:0;padding:0;}
.glass-card{background:rgba(255,255,255,0.02);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,0.1);}
.owner-view{display:none;}
input[type="time"]::-webkit-calendar-picker-indicator,
input[type="date"]::-webkit-calendar-picker-indicator{filter:invert(1);}
.animate-fade-in{animation:fadeIn 0.5s ease-in-out;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
</style>
</head>
<body class="min-h-screen flex flex-col">

<!-- Header -->
<nav class="p-4 flex justify-between items-center w-full max-w-7xl mx-auto border-b border-white/5">
  <div class="flex items-center gap-2 cursor-pointer" onclick="location.reload()">
    <div class="bg-amber-500 p-1.5 rounded-lg">
      <i data-lucide="scissors" class="text-black w-4 h-4"></i>
    </div>
    <span class="text-lg font-black italic tracking-tighter uppercase">OMI <span class="text-amber-500">SALON</span></span>
  </div>
  <button onclick="openLoginModal()" class="text-[10px] font-bold text-gray-500 hover:text-amber-500 transition-colors uppercase tracking-widest">मालक लॉगिन</button>
</nav>

<main class="flex-grow flex items-start justify-center p-4 pt-6 md:items-center md:pt-4">

<!-- Booking Card -->
<div id="user-view" class="w-full max-w-md animate-fade-in">
<div class="glass-card rounded-[2rem] p-6 md:p-8 shadow-2xl">
<div class="text-center mb-6">
<h1 class="text-2xl font-black mb-1 tracking-tight">अपॉइंटमेंट बुक करा</h1>
<p class="text-amber-500 font-bold text-[11px] tracking-widest uppercase">वेळ: सकाळी ९ ते रात्री ९</p>
</div>

<form id="bookingForm" class="space-y-4">
<div>
<label class="text-[10px] uppercase font-bold text-gray-500 ml-1 mb-1 block">तुमचे पूर्ण नाव</label>
<input type="text" id="custName" required placeholder="नाव लिहा" class="w-full bg-white/5 border border-white/10 rounded-xl p-3.5 focus:ring-1 focus:ring-amber-500 outline-none transition-all text-sm">
</div>

<div>
<label class="text-[10px] uppercase font-bold text-gray-500 ml-1 mb-1 block">मोबाईल नंबर</label>
<input type="tel" id="custPhone" required placeholder="९१XXXXXXXX" class="w-full bg-white/5 border border-white/10 rounded-xl p-3.5 focus:ring-1 focus:ring-amber-500 outline-none transition-all text-sm">
</div>

<div class="grid grid-cols-2 gap-3">
<div class="col-span-2">
<label class="text-[10px] uppercase font-bold text-gray-500 ml-1 mb-1 block">सेवा निवडा</label>
<select id="custService" class="w-full bg-white/5 border border-white/10 rounded-xl p-3.5 focus:ring-1 focus:ring-amber-500 outline-none transition-all appearance-none text-sm">
<option class="bg-zinc-900">हेअरकट (Haircut)</option>
<option class="bg-zinc-900">दाढी (Beard)</option>
<option class="bg-zinc-900">हेअरकट + दाढी</option>
<option class="bg-zinc-900">फेसिअल / क्लीनअप</option>
<option class="bg-zinc-900">हेड मसाज</option>
</select>
</div>
<div>
<label class="text-[10px] uppercase font-bold text-gray-500 ml-1 mb-1 block">तारीख</label>
<input type="date" id="custDate" required class="w-full bg-white/5 border border-white/10 rounded-xl p-3.5 focus:ring-1 focus:ring-amber-500 outline-none text-sm">
</div>
<div>
<label class="text-[10px] uppercase font-bold text-gray-500 ml-1 mb-1 block">वेळ</label>
<input type="time" id="custTime" min="09:00" max="21:00" required class="w-full bg-white/5 border border-white/10 rounded-xl p-3.5 focus:ring-1 focus:ring-amber-500 outline-none text-sm">
</div>
</div>

<button type="submit" id="btnSubmit" class="w-full bg-amber-500 text-black font-black py-4 rounded-xl hover:bg-amber-400 active:scale-95 transition-all flex items-center justify-center gap-2 text-md mt-2 shadow-lg shadow-amber-500/10">
बुकिंग निश्चित करा <i data-lucide="message-circle" class="w-5 h-5"></i>
</button>
</form>
</div>

<!-- Footer -->
<div class="text-center mt-6 space-y-2">
<p class="text-amber-500 text-[10px] uppercase tracking-widest font-black">ओमी सलून • ओमकार माने</p>
<p class="text-white text-[10px] uppercase tracking-[0.15em] font-bold">Developed by Sourabh Bongarde</p>
<p class="text-white/60 text-[9px] font-medium tracking-wide">© All Rights Reserved by Omi Salon</p>
</div>
</div>

<!-- Owner Dashboard -->
<div id="owner-view" class="owner-view w-full max-w-5xl">
<div class="flex justify-between items-center mb-6">
<h1 class="text-2xl font-black uppercase italic">Dashboard</h1>
<button onclick="location.reload()" class="text-red-500 text-sm font-bold">Log Out</button>
</div>
<div class="glass-card rounded-2xl overflow-hidden border-white/5">
<div class="overflow-x-auto">
<table class="w-full text-left">
<thead class="bg-white/5 text-[10px] uppercase font-bold text-gray-500">
<tr>
<th class="p-4">ग्राहक</th>
<th class="p-4">सेवा</th>
<th class="p-4">वेळ/तारीख</th>
<th class="p-4 text-center">क्रिया</th>
</tr>
</thead>
<tbody id="bookingsTableBody" class="divide-y divide-white/5 text-sm"></tbody>
</table>
</div>
</div>
</div>

</main>

<!-- Login Modal -->
<div id="loginModal" class="fixed inset-0 bg-black/95 z-50 flex items-center justify-center hidden p-6">
<div class="bg-zinc-900 border border-white/10 p-6 rounded-2xl w-full max-w-xs shadow-2xl">
<h2 class="text-lg font-bold mb-4 text-center">मालक लॉगिन</h2>
<input type="password" id="ownerPassword" placeholder="पासवर्ड टाका" class="w-full bg-black border border-white/10 p-3 rounded-lg mb-4 outline-none focus:ring-1 focus:ring-amber-500 text-sm">
<div class="flex gap-2">
<button onclick="closeLoginModal()" class="flex-1 text-gray-500 text-xs font-bold py-2">रद्द करा</button>
<button onclick="handleLogin()" class="flex-1 bg-amber-500 text-black font-bold py-2 rounded-lg text-xs">लॉगिन</button>
</div>
</div>
</div>

<!-- Scripts -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyAGu894r9r05lgFjdVC6OGM361oWUBvDD0",
authDomain: "omi-salon.firebaseapp.com",
projectId: "omi-salon",
storageBucket: "omi-salon.firebasestorage.app",
messagingSenderId: "940217697993",
appId: "1:940217697993:web:c30ed53de67cf17507af18"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const collPath = "bookings";

document.getElementById('bookingForm').addEventListener('submit', async (e)=>{
e.preventDefault();
const btn = document.getElementById('btnSubmit');
const name=document.getElementById('custName').value;
const phone=document.getElementById('custPhone').value.replace(/\D/g,'');
const service=document.getElementById('custService').value;
const date=document.getElementById('custDate').value;
const time=document.getElementById('custTime').value;
if(parseInt(time.split(':')[0])<9 || parseInt(time.split(':')[0])>=21){alert("कृपया सकाळी ९ ते रात्री ९ दरम्यानची वेळ निवडा.");return;}
btn.disabled=true;btn.innerHTML="प्रक्रिया सुरू आहे...";
const waUrl=`https://api.whatsapp.com/send?phone=919145627957&text=${encodeURIComponent(`नमस्कार ओमी सलून! ✂️\n\nमी अपॉइंटमेंट बुक केली आहे:\n\nनाव: ${name}\nसेवा: ${service}\nतारीख: ${date}\nवेळ: ${time}\nनंबर: ${phone}\n\nकृपया बुकिंग कन्फर्म करा. धन्यवाद!`)}`;
try{await addDoc(collection(db, collPath), {name,phone,service,date,time,createdAt:new Date().toISOString()});window.open(waUrl,'_blank');btn.innerHTML="यशस्वी!";setTimeout(()=>{location.reload();},800);}catch(err){console.error(err);btn.disabled=false;btn.innerHTML="पुन्हा प्रयत्न करा";}});
window.openLoginModal=()=>document.getElementById('loginModal').classList.remove('hidden');
window.closeLoginModal=()=>document.getElementById('loginModal').classList.add('hidden');
window.handleLogin=()=>{
const pw=document.getElementById('ownerPassword').value;
if(pw==="Omi@299722"){document.getElementById('user-view').classList.add('hidden');document.getElementById('owner-view').classList.remove('owner-view');closeLoginModal();loadBookings();}else{alert("चुकीचा पासवर्ड!");}};
window.loadBookings=()=>{
onSnapshot(collection(db, collPath),(snapshot)=>{
const tbody=document.getElementById('bookingsTableBody');tbody.innerHTML='';
const bookings=[];snapshot.forEach(docSnap=>bookings.push({id:docSnap.id,...docSnap.data()}));
bookings.sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt));
bookings.forEach(b=>{
const tr=document.createElement('tr');tr.className="hover:bg-white/5 transition-colors border-b border-white/5 last:border-0";
tr.innerHTML=`
<td class="p-4"><div class="font-bold text-white">${b.name}</div><div class="text-[10px] text-gray-500">${b.phone}</div></td>
<td class="p-4 text-xs text-gray-300">${b.service}</td>
<td class="p-4"><div class="text-xs font-bold text-amber-500">${b.time}</div><div class="text-[9px] text-gray-500">${b.date}</div></td>
<td class="p-4 flex justify-center gap-2">
<button onclick="sendRem('${b.name}','${b.phone}','${b.date}','${b.time}')" class="p-2 bg-green-500/10 text-green-500 rounded-lg hover:bg-green-500 hover:text-white transition-all"><i data-lucide="bell" class="w-3.5 h-3.5"></i></button>
<button onclick="delBook('${b.id}')" class="p-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500 hover:text-white transition-all"><i data-lucide="trash" class="w-3.5 h-3.5"></i></button>
</td>`;tbody.appendChild(tr);});
lucide.createIcons();},err=>console.error("Firestore Listen Error:",err));
};
window.delBook=async(id)=>{if(confirm("डिलीट करायचे आहे का?"))await deleteDoc(doc(db, collPath, id));};
window.sendRem=(n,p,d,t)=>{const msg=`नमस्कार ${n}! ✂️\nअपॉइंटमेंट ${d} रोजी ${t} वाजता आहे. विसरू नका!`;window.open(`https://api.whatsapp.com/send?phone=91${p.replace(/\D/g,'')}&text=${encodeURIComponent(msg)}`);};
lucide.createIcons();
</script>
</body>
</html>
