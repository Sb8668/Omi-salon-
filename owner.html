<!DOCTYPE html>
<html>
<head><title>Owner Panel</title></head>
<body>
<h2>ЁЯУЛ Bookings</h2>
<div id="list"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs, updateDoc, doc } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const app = initializeApp({
 apiKey:"AIzaSyAGu894r9r05lgFjdVC6OGM361oWUBvDD0",
 authDomain:"omi-salon.firebaseapp.com",
 projectId:"omi-salon"
});
const db = getFirestore(app);

async function load(){
 const snap = await getDocs(collection(db,"bookings"));
 snap.forEach(d=>{
  let b=d.data();
  list.innerHTML+=`
  <div>
   <b>${b.name}</b> (${b.service})<br>
   ${b.date} ${b.time}<br>
   ЁЯУЮ ${b.phone}<br>
   <button onclick="confirm('${d.id}','${b.phone}')">Confirm</button>
   <button onclick="rem('${b.phone}')">Reminder</button>
   <hr>
  </div>`;
 });
}

window.confirm = async (id,p)=>{
 await updateDoc(doc(db,"bookings",id),{status:"Confirmed"});
 window.open(`https://wa.me/91${p}?text=тЬЕ%20рддреБрдордЪреА%20рдЕрдкреЙрдЗрдВрдЯрдореЗрдВрдЯ%20Confirm%20рдЭрд╛рд▓реА`);
};

window.rem = (p)=>{
 window.open(`https://wa.me/91${p}?text=тП░%20рдЖрдЬ%20рддреБрдордЪреА%20Salon%20рдЕрдкреЙрдЗрдВрдЯрдореЗрдВрдЯ`);
};

load();
</script>
</body>
</html>
