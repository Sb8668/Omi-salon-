<!DOCTYPE html>
<html>
<head>
<title>Owner Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{background:#f5e6d3;font-family:Arial}
.card{
 max-width:520px;margin:20px auto;
 background:#fff;padding:20px;border-radius:15px;
 box-shadow:0 0 20px rgba(0,0,0,.3);
}
button{
 padding:10px 14px;border:none;border-radius:8px;
 color:white;margin:5px;
}
.confirm{background:green}
.reminder{background:orange}
</style>
</head>

<body>
<div class="card">
<h2>üìã Live Bookings</h2>
<div id="list"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs, updateDoc, doc } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const app=initializeApp({
 apiKey:"AIzaSyAGu894r9r05lgFjdVC6OGM361oWUBvDD0",
 authDomain:"omi-salon.firebaseapp.com",
 projectId:"omi-salon"
});
const db=getFirestore(app);

const snap=await getDocs(collection(db,"bookings"));
snap.forEach(d=>{
 let b=d.data();
 list.innerHTML+=`
 <div>
 <b>${b.name}</b> (${b.service})<br>
 ${b.date} ${b.time}<br>
 üìû ${b.phone}<br>
 Status: ${b.status}<br>
 <button class="confirm" onclick="confirm('${d.id}','${b.phone}')">Confirm</button>
 <button class="reminder" onclick="remind('${b.phone}')">Reminder</button>
 </div><hr>`;
});

window.confirm=async(id,p)=>{
 await updateDoc(doc(db,"bookings",id),{status:"Confirmed"});
 window.open(`https://wa.me/91${p}?text=‡§Ü‡§™‡§≤‡•Ä%20‡§Ö‡§™‡•â‡§á‡§Ç‡§ü‡§Æ‡•á‡§Ç‡§ü%20Confirm%20‡§ù‡§æ‡§≤‡•Ä%20‡§Ü‡§π‡•á%20üôè`);
};
window.remind=(p)=>{
 window.open(`https://wa.me/91${p}?text=‚è∞%20‡§Ü‡§ú%20‡§§‡•Å‡§Æ‡§ö‡•Ä%20‡§Ö‡§™‡•â‡§á‡§Ç‡§ü‡§Æ‡•á‡§Ç‡§ü%20‡§Ü‡§π‡•á`);
};
</script>
</body>
</html>
